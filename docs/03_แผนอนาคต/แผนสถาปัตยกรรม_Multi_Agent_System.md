# ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏° Multi-Agent ‡∏ó‡∏µ‡πà‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡πÑ‡∏î‡πâ (Scalable Multi-Agent Architecture Design)

‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏£‡∏£‡πà‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡πÅ‡∏ú‡∏ô‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö **Multi-Agent System** ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï ‡πÇ‡∏î‡∏¢‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏° **Modular** (‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏¢‡πà‡∏≠‡∏¢), **Scalable** (‡∏Ç‡∏¢‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢), ‡πÅ‡∏•‡∏∞ **Maintainable** (‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏á‡πà‡∏≤‡∏¢)

‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡πâ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö **Complex Reasoning** (‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡πÅ‡∏ö‡∏ö Multi-step) ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ Core Logic ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (RAG Orchestrator) ‡∏¢‡∏∏‡πà‡∏á‡πÄ‡∏´‡∏¢‡∏¥‡∏á

---

## 1. ‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡∏´‡∏•‡∏±‡∏Å (Core Concept)

‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏¢‡∏±‡∏î Logic ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏¥‡∏î‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô `RAGOrchestrator` ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÉ‡∏´‡πâ Orchestrator ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏µ‡∏¢‡∏á **Conductor** (‡∏ß‡∏≤‡∏ó‡∏¢‡∏≤‡∏Å‡∏£) ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô‡∏¢‡∏≤‡∏Å‡πÜ ‡πÑ‡∏õ‡πÉ‡∏´‡πâ **Specialized Agents** (‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ó‡∏≤‡∏á)

*   **RAG Orchestrator:** ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Fast response, Routing, ‡πÅ‡∏•‡∏∞‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (Short-term interactions)
*   **Specialized Agents:** ‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Thinking Steps ‡πÄ‡∏¢‡∏≠‡∏∞‡πÜ (Planning, Deep Research, Coding, Booking)

---

## 2. ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà (Proposed Directory Structure)

‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á "Hub" ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Agents ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞ ‡πÅ‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å `services` ‡∏õ‡∏Å‡∏ï‡∏¥ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏ß‡πà‡∏≤‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ "‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏¥‡∏î" (Thinkers) ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÅ‡∏Ñ‡πà "‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ó‡∏≥‡∏á‡∏≤‡∏ô" (Workers)

```text
Back-end/
‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îú‚îÄ‚îÄ agents/                 # üìÇ [NEW] Agent Hub
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py         # Agent Registry logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base_agent.py       # üß© Abstract Base Class (‡πÅ‡∏°‡πà‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô)
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ planner/            # ü§ñ Agent 1: Travel Planner
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ planner_agent.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ prompts/        # üó£Ô∏è Prompts ‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏†‡∏≤‡∏©‡∏≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ system_th.txt
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ system_en.txt
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tools.py        # üõ†Ô∏è Tools ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡∏≠‡∏á Planner (‡πÄ‡∏ä‡πà‡∏ô CalendarCalc)
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ researcher/         # ü§ñ Agent 2: Deep Researcher (Example Future)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ researcher_agent.py
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ booking/            # ü§ñ Agent 3: Booking Helper (Example Future)
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ booking_agent.py
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ orchestrator/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ rag_orchestrator.py # üß† Updated to delegate tasks to AgentRegistry
‚îÇ   ‚îî‚îÄ‚îÄ ...
```

---

## 3. ‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö Base Agent (Standardized Interface)

‡∏ó‡∏∏‡∏Å Agent ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏ß‡∏° "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏ö‡∏ö" ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Orchestrator ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢ (Polymorphism) ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô if-else ‡πÄ‡∏¢‡∏≠‡∏∞‡πÅ‡∏¢‡∏∞‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï

**File:** `Back-end/core/agents/base_agent.py`

```python
from abc import ABC, abstractmethod
from typing import Dict, Any, List

class BaseAgent(ABC):
    def __init__(self, model_service, language: str = "th"):
        self.model_service = model_service
        self.language = language

    @abstractmethod
    async def process(self, query: str, context: Dict[str, Any]) -> Dict[str, Any]:
        """
        Main entry point for the agent.
        Input: Query string + Context (History, User Prefs)
        Output: Standardized Response Dict
        """
        pass

    @property
    @abstractmethod
    def name(self) -> str:
        """Agent's unique identifier (e.g., 'TRAVEL_PLANNER')"""
        pass
        
    def set_language(self, language: str):
        """Update language for dynamic context switching"""
        self.language = language
        # Logic to reload prompts if needed
```

---

## 4. ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏†‡∏≤‡∏©‡∏≤ (Language Handing Strategy)

‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Multi-Agent ‡∏Ñ‡∏∑‡∏≠‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏≠‡∏≤‡∏à‡∏à‡∏∞ "‡∏•‡∏∑‡∏°" ‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏¢‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÅ‡∏Å‡πâ‡∏î‡πâ‡∏ß‡∏¢:

1.  **Global Context Propagation:** `RAGOrchestrator` ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á `language_code` ‡πÑ‡∏õ‡πÉ‡∏´‡πâ Agents ‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£ `process()`
2.  **Multilingual System Prompts:** ‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞ Agent Folder ‡∏à‡∏∞‡∏°‡∏µ‡πÑ‡∏ü‡∏•‡πå prompt ‡πÅ‡∏¢‡∏Å‡∏†‡∏≤‡∏©‡∏≤‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ Agent ‡∏™‡∏±‡∏ö‡∏™‡∏ô
    *   `agents/planner/prompts/system_th.txt`
    *   `agents/planner/prompts/system_en.txt`
3.  **Output Standardization:** ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ Agent ‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô (JSON) ‡∏ó‡∏µ‡πà‡∏°‡∏µ key `{"text": "...", "meta": {...}}` ‡∏´‡∏£‡∏∑‡∏≠ format ‡∏ó‡∏µ‡πà‡∏ï‡∏Å‡∏•‡∏á‡∏Å‡∏±‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Frontend ‡∏ô‡∏≥‡πÑ‡∏õ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ñ‡∏π‡∏Å‡∏†‡∏≤‡∏©‡∏≤

---

## 5. ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö Orchestrator (Integration Flow)

`RAGOrchestrator` ‡∏à‡∏∞‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà Routing ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏à‡∏ï‡∏ô‡∏≤ (Intent):

1.  **User Input** -> `RAGOrchestrator`
2.  **Intent Check:**
    *   ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô `INFORMATIONAL` (‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ) -> ‡∏ó‡∏≥ RAG ‡∏õ‡∏Å‡∏ï‡∏¥ (Fast path, Llama/Gemini response)
    *   ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô `COMPLEX_TASK` (‡πÄ‡∏ä‡πà‡∏ô "‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß 3 ‡∏ß‡∏±‡∏ô") -> **Delegate** ‡πÑ‡∏õ‡∏ó‡∏µ‡πà `AgentRegistry`
3.  **Agent Execution:**
    *   `agent = AgentRegistry.get("TRAVEL_PLANNER")`
    *   `agent.set_language(current_lang)`
    *   `response = await agent.process(query, context)`
    *   Agent ‡∏Ñ‡∏¥‡∏î 2-3 step (‡∏≠‡∏≤‡∏à‡πÉ‡∏ä‡πâ Tool ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å RAG ‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏£‡∏¥‡∏á‡∏°‡∏≤‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡πÅ‡∏ú‡∏ô)
4.  **Response:** Agent ‡∏™‡πà‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤ -> Orchestrator ‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÉ‡∏´‡πâ User

---

## 6. ‡∏™‡∏£‡∏∏‡∏õ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ô‡∏µ‡πâ

1.  **Scalability:** ‡πÄ‡∏û‡∏¥‡πà‡∏° Agent ‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î (Agent 4, 5, 6...) ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ code ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á Orchestrator
2.  **Isolation:** ‡∏ö‡∏±‡πä‡∏Å‡πÉ‡∏ô Planner ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö Chat ‡∏´‡∏•‡∏±‡∏Å‡∏û‡∏±‡∏á
3.  **Specialization:** ‡πÅ‡∏ï‡πà‡∏•‡∏∞ Agent ‡πÉ‡∏ä‡πâ‡πÇ‡∏°‡πÄ‡∏î‡∏•‡∏ó‡∏µ‡πà‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ (‡πÄ‡∏ä‡πà‡∏ô Planner ‡πÉ‡∏ä‡πâ Gemini Pro, Chat ‡πÉ‡∏ä‡πâ Llama 70B Fast)
4.  **Clean Code:** ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö ‡∏á‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ Junior Dev ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Agent ‡∏¢‡πà‡∏≠‡∏¢

---
*‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠: 2026-01-23*
