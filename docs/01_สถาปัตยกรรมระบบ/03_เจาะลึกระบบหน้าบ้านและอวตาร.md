# üé≠ ‡πÄ‡∏à‡∏≤‡∏∞‡∏•‡∏∂‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡πâ‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå‡∏≠‡∏ß‡∏ï‡∏≤‡∏£ (Frontend Deep Dive)
**Updated:** January 2026

‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏â‡∏ö‡∏±‡∏ö‡∏ô‡∏µ‡πâ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ "‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏ç‡∏ä‡∏≤‡∏ï‡∏ç‡∏≤‡∏ì" (Body & Instinct) ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö AI Robot Guide ‡∏ã‡∏∂‡πà‡∏á‡∏ñ‡∏π‡∏Å‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô **Modular Architecture** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î

---

## 1. ‡∏õ‡∏£‡∏±‡∏ä‡∏ç‡∏≤‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö: "Smart Edge"
‡πÄ‡∏£‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏´‡πâ Frontend ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏Ñ‡πà "‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏Å" ‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏à‡∏≤‡∏Å Server ‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏≤‡πÉ‡∏™‡πà **Logic (Instinct)** ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏Ñ‡∏¥‡∏î‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏´‡∏ô‡∏∂‡πà‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠:
1.  **Zero Latency:** ‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡∏ï‡πà‡∏≠‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô (‡πÄ‡∏ä‡πà‡∏ô "‡∏´‡∏¢‡∏∏‡∏î‡∏û‡∏π‡∏î", "‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏Å‡∏¥‡∏ô", "‡πÄ‡∏ï‡πâ‡∏ô") ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡πÄ‡∏ô‡πá‡∏ï
2.  **Resilience:** ‡∏£‡∏∞‡∏ö‡∏ö‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÅ‡∏•‡∏∞‡πÇ‡∏ï‡πâ‡∏ï‡∏≠‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÅ‡∏°‡πâ‡πÄ‡∏ô‡πá‡∏ï‡∏´‡∏•‡∏∏‡∏î
3.  **Modular:** ‡πÅ‡∏¢‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô (Avatar, Chat, UI) ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏á‡πà‡∏≤‡∏¢ ‡πÑ‡∏°‡πà‡∏û‡∏±‡∏á‡πÑ‡∏õ‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö

---

## 2. ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà (`frontend/js`)

```
frontend/js/
‚îú‚îÄ‚îÄ app.js                 # üëë The Brain: ‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏•‡∏∞‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° (Bootstrapper)
‚îú‚îÄ‚îÄ services/              # üì° Communicators: ‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö‡πÇ‡∏•‡∏Å‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å
‚îÇ   ‚îú‚îÄ‚îÄ chatService.js     # ‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö API Backend
‚îÇ   ‚îú‚îÄ‚îÄ avatarService.js   # ‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö Avatar Iframe
‚îÇ   ‚îú‚îÄ‚îÄ alertService.js    # ‡∏£‡∏±‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô Real-time
‚îÇ   ‚îî‚îÄ‚îÄ frontendDirector.js # üß† Local Brain (‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö‡πÉ‡∏Ñ‡∏£)
‚îú‚îÄ‚îÄ modules/               # üì¶ Business Logic: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ State ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô
‚îÇ   ‚îú‚îÄ‚îÄ StateManager.js    # ‡πÄ‡∏Å‡πá‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏π‡∏î? ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á?)
‚îÇ   ‚îú‚îÄ‚îÄ UIManager.js       # ‡∏™‡∏±‡πà‡∏á Render ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ / Panel / Toast
‚îÇ   ‚îî‚îÄ‚îÄ VoiceModeManager.js # ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÑ‡∏°‡∏Ñ‡πå‡πÅ‡∏•‡∏∞‡πÇ‡∏´‡∏°‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á
‚îî‚îÄ‚îÄ components/            # üß© UI Widgets
    ‚îú‚îÄ‚îÄ Navbar.js
    ‚îî‚îÄ‚îÄ FabManager.js      # ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡∏•‡∏≠‡∏¢
```

---

## 3. ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (Key Components)

### 3.1 Frontend Director (`frontendDirector.js`)
‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ **"‡∏™‡∏°‡∏≠‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏ô‡πâ‡∏≤"** ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢ Router ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô Browser ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏π‡∏î:

1.  **Intercept:** ‡∏î‡∏±‡∏Å‡∏à‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
2.  **Analyze:** ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Pattern ‡∏î‡πâ‡∏ß‡∏¢ Regex ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡πÄ‡∏™‡∏µ‡πâ‡∏¢‡∏ß‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
3.  **Decide:**
    *   **Case A (Local Action):** ‡∏ñ‡πâ‡∏≤‡∏™‡∏±‡πà‡∏á‡∏ß‡πà‡∏≤ "‡∏´‡∏¢‡∏∏‡∏î", "‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ", "‡πÄ‡∏ï‡πâ‡∏ô" -> ‡∏™‡∏±‡πà‡∏á Javascript ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (‡πÑ‡∏°‡πà‡∏¢‡∏¥‡∏á API)
    *   **Case B (External AI):** ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ -> ‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÉ‡∏´‡πâ Backend RAG
    *   **Case C (Google Assistant):** ‡∏ñ‡πâ‡∏≤‡∏ñ‡∏≤‡∏°‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏ß‡∏•‡∏≤/‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏® -> ‡∏™‡πà‡∏á Google Assistant (Future)

### 3.2 Voice Mode Manager
‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Life Cycle ‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∏‡∏¢‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏™‡∏µ‡∏¢‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∑‡πà‡∏ô‡πÑ‡∏´‡∏•‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡πå:
*   **Auto-Silence Detection:** ‡∏´‡∏¢‡∏∏‡∏î‡∏≠‡∏±‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏á‡∏µ‡∏¢‡∏ö
*   **Interrupt Handling:** ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏û‡∏π‡∏î‡πÅ‡∏ó‡∏£‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ AI ‡∏´‡∏¢‡∏∏‡∏î‡∏û‡∏π‡∏î‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

### 3.3 Avatar Manager
‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô "‡∏ú‡∏π‡πâ‡∏Å‡∏≥‡∏Å‡∏±‡∏ö" ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° iframe ‡∏Ç‡∏≠‡∏á Avatar:
*   **State Machine:** ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå (Happy, Thinking, Worried) ‡πÅ‡∏•‡∏∞‡∏ó‡πà‡∏≤‡∏ó‡∏≤‡∏á (Wave, Dance)
*   **Lip Sync Integration:** ‡∏£‡∏±‡∏ö Stream ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Viseme ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡∏¢‡∏±‡∏ö‡∏õ‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Ñ‡∏≥‡∏û‡∏π‡∏î

---

## 4. Flow ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô (User Interaction Loop)

1.  **User Speaks:** `VoiceModeManager` ‡∏à‡∏±‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á -> ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô Text
2.  **Directing:** ‡∏™‡πà‡∏á Text ‡πÉ‡∏´‡πâ `FrontendDirector` ‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à
3.  **Visual Feedback:** `UIManager` ‡πÇ‡∏ä‡∏ß‡πå‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏¥‡∏î..." ‡πÅ‡∏•‡∏∞ Avatar ‡∏ó‡∏≥‡∏ó‡πà‡∏≤‡∏Ñ‡∏£‡∏∏‡πà‡∏ô‡∏Ñ‡∏¥‡∏î
4.  **Action:**
    *   *Local:* `executeLocalAction()` ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
    *   *Cloud:* `chatService` ‡∏¢‡∏¥‡∏á API -> ‡πÑ‡∏î‡πâ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå -> `AvatarManager` ‡∏û‡∏π‡∏î‡∏ï‡∏≠‡∏ö + ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
5.  **Feedback Loop:** ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏î Like/Dislike -> ‡∏™‡πà‡∏á Analytics ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

---

## 5. ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á (Configuration)
‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Flow ‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà `frontend/js/config.js` ‡πÄ‡∏ä‡πà‡∏ô:
*   `API_ENDPOINT`: ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏≠‡∏á Python Backend
*   `TIMEOUT_MS`: ‡πÄ‡∏ß‡∏•‡∏≤ timeout ‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
*   `DEFAULT_LANG`: ‡∏†‡∏≤‡∏©‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (TH/EN)

---
*‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡∏à‡∏£‡∏¥‡∏á ‡∏ì ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 10 Jan 2026*
